{"ast":null,"code":"import { drawing as draw } from '@progress/kendo-drawing';\nimport { ChartElement, Point, Box } from '../../core';\nimport { FADEIN, INITIAL_ANIMATION_DURATION } from '../constants';\nimport { setDefaultOptions, alignPathToPixel } from '../../common';\nvar DEFAULT_ERROR_BAR_WIDTH = 4;\n\nvar ErrorBarBase = function (ChartElement) {\n  function ErrorBarBase(low, high, isVertical, chart, series, options) {\n    ChartElement.call(this, options);\n    this.low = low;\n    this.high = high;\n    this.isVertical = isVertical;\n    this.chart = chart;\n    this.series = series;\n  }\n\n  if (ChartElement) ErrorBarBase.__proto__ = ChartElement;\n  ErrorBarBase.prototype = Object.create(ChartElement && ChartElement.prototype);\n  ErrorBarBase.prototype.constructor = ErrorBarBase;\n\n  ErrorBarBase.prototype.reflow = function reflow(targetBox) {\n    var endCaps = this.options.endCaps;\n    var isVertical = this.isVertical;\n    var axis = this.getAxis();\n    var valueBox = axis.getSlot(this.low, this.high);\n    var centerBox = targetBox.center();\n    var capsWidth = this.getCapsWidth(targetBox, isVertical);\n    var capValue = isVertical ? centerBox.x : centerBox.y;\n    var capStart = capValue - capsWidth;\n    var capEnd = capValue + capsWidth;\n    var linePoints;\n\n    if (isVertical) {\n      linePoints = [new Point(centerBox.x, valueBox.y1), new Point(centerBox.x, valueBox.y2)];\n\n      if (endCaps) {\n        linePoints.push(new Point(capStart, valueBox.y1), new Point(capEnd, valueBox.y1), new Point(capStart, valueBox.y2), new Point(capEnd, valueBox.y2));\n      }\n\n      this.box = new Box(capStart, valueBox.y1, capEnd, valueBox.y2);\n    } else {\n      linePoints = [new Point(valueBox.x1, centerBox.y), new Point(valueBox.x2, centerBox.y)];\n\n      if (endCaps) {\n        linePoints.push(new Point(valueBox.x1, capStart), new Point(valueBox.x1, capEnd), new Point(valueBox.x2, capStart), new Point(valueBox.x2, capEnd));\n      }\n\n      this.box = new Box(valueBox.x1, capStart, valueBox.x2, capEnd);\n    }\n\n    this.linePoints = linePoints;\n  };\n\n  ErrorBarBase.prototype.getCapsWidth = function getCapsWidth(box, isVertical) {\n    var boxSize = isVertical ? box.width() : box.height();\n    var capsWidth = Math.min(Math.floor(boxSize / 2), DEFAULT_ERROR_BAR_WIDTH) || DEFAULT_ERROR_BAR_WIDTH;\n    return capsWidth;\n  };\n\n  ErrorBarBase.prototype.createVisual = function createVisual() {\n    var this$1 = this;\n    var options = this.options;\n    var visual = options.visual;\n\n    if (visual) {\n      this.visual = visual({\n        low: this.low,\n        high: this.high,\n        rect: this.box.toRect(),\n        sender: this.getSender(),\n        options: {\n          endCaps: options.endCaps,\n          color: options.color,\n          line: options.line\n        },\n        createVisual: function () {\n          this$1.createDefaultVisual();\n          var defaultVisual = this$1.visual;\n          delete this$1.visual;\n          return defaultVisual;\n        }\n      });\n    } else {\n      this.createDefaultVisual();\n    }\n  };\n\n  ErrorBarBase.prototype.createDefaultVisual = function createDefaultVisual() {\n    var this$1 = this;\n    var ref = this;\n    var options = ref.options;\n    var linePoints = ref.linePoints;\n    var lineOptions = {\n      stroke: {\n        color: options.color,\n        width: options.line.width,\n        dashType: options.line.dashType\n      }\n    };\n    ChartElement.prototype.createVisual.call(this);\n\n    for (var idx = 0; idx < linePoints.length; idx += 2) {\n      var line = new draw.Path(lineOptions).moveTo(linePoints[idx].x, linePoints[idx].y).lineTo(linePoints[idx + 1].x, linePoints[idx + 1].y);\n      alignPathToPixel(line);\n      this$1.visual.append(line);\n    }\n  };\n\n  return ErrorBarBase;\n}(ChartElement);\n\nsetDefaultOptions(ErrorBarBase, {\n  animation: {\n    type: FADEIN,\n    delay: INITIAL_ANIMATION_DURATION\n  },\n  endCaps: true,\n  line: {\n    width: 2\n  },\n  zIndex: 1\n});\nexport default ErrorBarBase;","map":null,"metadata":{},"sourceType":"module"}