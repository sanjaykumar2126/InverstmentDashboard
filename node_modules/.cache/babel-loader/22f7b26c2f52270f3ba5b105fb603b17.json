{"ast":null,"code":"import { DAYS, WEEKS, MONTHS, YEARS, TIME_PER_UNIT } from './constants';\nimport dateDiff from './date-diff';\nimport absoluteDateDiff from './absolute-date-diff';\nimport toDate from './to-date';\n\nfunction timeIndex(date, start, baseUnit) {\n  return absoluteDateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n}\n\nexport default function dateIndex(value, start, baseUnit, baseUnitStep) {\n  var date = toDate(value);\n  var startDate = toDate(start);\n  var index;\n\n  if (baseUnit === MONTHS) {\n    index = date.getMonth() - startDate.getMonth() + (date.getFullYear() - startDate.getFullYear()) * 12 + timeIndex(date, new Date(date.getFullYear(), date.getMonth()), DAYS) / new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n  } else if (baseUnit === YEARS) {\n    index = date.getFullYear() - startDate.getFullYear() + dateIndex(date, new Date(date.getFullYear(), 0), MONTHS, 1) / 12;\n  } else if (baseUnit === DAYS || baseUnit === WEEKS) {\n    index = timeIndex(date, startDate, baseUnit);\n  } else {\n    index = dateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n  }\n\n  return index / baseUnitStep;\n}","map":null,"metadata":{},"sourceType":"module"}