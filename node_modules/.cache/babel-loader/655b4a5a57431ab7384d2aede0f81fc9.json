{"ast":null,"code":"import { Class, deepExtend, elementStyles, getTemplate, setDefaultOptions } from '../common';\nimport { toDate, toTime } from '../date-utils';\nimport FadeOutAnimation from './fade-out-animation';\n\nfunction createDiv(className, style) {\n  var div = document.createElement(\"div\");\n  div.className = className;\n\n  if (style) {\n    div.style.cssText = style;\n  }\n\n  return div;\n}\n\nvar NavigatorHint = function (Class) {\n  function NavigatorHint(container, chartService, options) {\n    Class.call(this);\n    this.options = deepExtend({}, this.options, options);\n    this.container = container;\n    this.chartService = chartService;\n    var padding = elementStyles(container, [\"paddingLeft\", \"paddingTop\"]);\n    this.chartPadding = {\n      top: padding.paddingTop,\n      left: padding.paddingLeft\n    };\n    this.createElements();\n    container.appendChild(this.element);\n  }\n\n  if (Class) NavigatorHint.__proto__ = Class;\n  NavigatorHint.prototype = Object.create(Class && Class.prototype);\n  NavigatorHint.prototype.constructor = NavigatorHint;\n\n  NavigatorHint.prototype.createElements = function createElements() {\n    var element = this.element = createDiv('k-navigator-hint', 'display: none; position: absolute; top: 1px; left: 1px;');\n    var tooltip = this.tooltip = createDiv('k-tooltip k-chart-tooltip');\n    var scroll = this.scroll = createDiv('k-scroll');\n    tooltip.innerHTML = '&nbsp;';\n    element.appendChild(tooltip);\n    element.appendChild(scroll);\n  };\n\n  NavigatorHint.prototype.show = function show(from, to, bbox) {\n    var ref = this;\n    var element = ref.element;\n    var options = ref.options;\n    var scroll = ref.scroll;\n    var tooltip = ref.tooltip;\n    var middle = toDate(toTime(from) + toTime(to - from) / 2);\n    var scrollWidth = bbox.width() * 0.4;\n    var minPos = bbox.center().x - scrollWidth;\n    var maxPos = bbox.center().x;\n    var posRange = maxPos - minPos;\n    var range = options.max - options.min;\n    var scale = posRange / range;\n    var offset = middle - options.min;\n    var text = this.chartService.intl.format(options.format, from, to);\n    var template = getTemplate(options);\n    this.clearHideTimeout();\n\n    if (!this._visible) {\n      elementStyles(element, {\n        visibility: 'hidden',\n        display: 'block'\n      });\n      this._visible = true;\n    }\n\n    if (template) {\n      text = template({\n        from: from,\n        to: to\n      });\n    }\n\n    tooltip.innerHTML = text;\n    elementStyles(tooltip, {\n      left: bbox.center().x - tooltip.offsetWidth / 2,\n      top: bbox.y1\n    });\n    var tooltipStyle = elementStyles(tooltip, ['marginTop', 'borderTopWidth', 'height']);\n    elementStyles(scroll, {\n      width: scrollWidth,\n      left: minPos + offset * scale,\n      top: bbox.y1 + tooltipStyle.marginTop + tooltipStyle.borderTopWidth + tooltipStyle.height / 2\n    });\n    elementStyles(element, {\n      visibility: 'visible'\n    });\n  };\n\n  NavigatorHint.prototype.clearHideTimeout = function clearHideTimeout() {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    if (this._hideAnimation) {\n      this._hideAnimation.cancel();\n    }\n  };\n\n  NavigatorHint.prototype.hide = function hide() {\n    var this$1 = this;\n    this.clearHideTimeout();\n    this._hideTimeout = setTimeout(function () {\n      this$1._visible = false;\n      this$1._hideAnimation = new FadeOutAnimation(this$1.element);\n\n      this$1._hideAnimation.setup();\n\n      this$1._hideAnimation.play();\n    }, this.options.hideDelay);\n  };\n\n  NavigatorHint.prototype.destroy = function destroy() {\n    this.clearHideTimeout();\n\n    if (this.container) {\n      this.container.removeChild(this.element);\n    }\n\n    delete this.container;\n    delete this.chartService;\n    delete this.element;\n    delete this.tooltip;\n    delete this.scroll;\n  };\n\n  return NavigatorHint;\n}(Class);\n\nsetDefaultOptions(NavigatorHint, {\n  format: \"{0:d} - {1:d}\",\n  hideDelay: 500\n});\nexport default NavigatorHint;","map":null,"metadata":{},"sourceType":"module"}