{"ast":null,"code":"import RadialGauge from '../radial/radial-gauge';\nimport ArcScale from './arc-scale';\nimport RangePointer from './range-pointer';\nimport { deepExtend } from '../../common';\n\nvar ArcGauge = function (RadialGauge) {\n  function ArcGauge() {\n    RadialGauge.apply(this, arguments);\n  }\n\n  if (RadialGauge) ArcGauge.__proto__ = RadialGauge;\n  ArcGauge.prototype = Object.create(RadialGauge && RadialGauge.prototype);\n  ArcGauge.prototype.constructor = ArcGauge;\n\n  ArcGauge.prototype._initTheme = function _initTheme(theme) {\n    RadialGauge.prototype._initTheme.call(this, theme);\n\n    this.options.color = this.options.color || (this.theme.pointer || {}).color;\n  };\n\n  ArcGauge.prototype._createModel = function _createModel() {\n    var options = this.options;\n    var scale = this.scale = new ArcScale(options.scale, this.contextService);\n    var pointer = new RangePointer(scale, deepExtend({}, {\n      colors: options.colors,\n      color: options.color,\n      value: options.value,\n      opacity: options.opacity,\n      animation: {\n        transitions: options.transitions\n      }\n    }));\n    this.pointers = [pointer];\n  };\n\n  ArcGauge.prototype._buildPointers = function _buildPointers(pointers) {\n    for (var i = 0; i < pointers.length; i++) {\n      var current = pointers[i];\n      current.render();\n      current.value(current.options.value);\n    }\n  };\n\n  ArcGauge.prototype._setValueOptions = function _setValueOptions(value) {\n    this.options.value = value;\n  };\n\n  ArcGauge.prototype.currentColor = function currentColor() {\n    var pointer = this.pointers[0];\n\n    if (pointer) {\n      return pointer.currentColor();\n    }\n  };\n\n  ArcGauge.prototype.centerLabelPosition = function centerLabelPosition(width, height) {\n    var size = this.getSize();\n    var center = this.scale.arc.center;\n    var left = center.x - width / 2;\n    var top = center.y - height / 2;\n\n    if (width < size.width) {\n      var right = left + width;\n      left = Math.max(left, 0);\n\n      if (right > size.width) {\n        left -= right - size.width;\n      }\n    }\n\n    if (height < size.height) {\n      var bbox = this.scale.bbox;\n      var yLimit = bbox.bottomRight().y;\n      var bottom = top + height;\n      top = Math.max(top, bbox.origin.y);\n\n      if (bottom > yLimit) {\n        top -= bottom - yLimit;\n      }\n    }\n\n    return {\n      left: left,\n      top: top\n    };\n  };\n\n  return ArcGauge;\n}(RadialGauge);\n\nexport default ArcGauge;","map":null,"metadata":{},"sourceType":"module"}