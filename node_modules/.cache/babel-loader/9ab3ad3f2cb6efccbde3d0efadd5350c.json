{"ast":null,"code":"import { setDefaultOptions, deepExtend, defined, getSpacing } from '../../common';\nimport { Box } from '../../core';\nimport { BLACK } from '../../common/constants';\nimport { BAR_POINTER } from '../constants';\nimport Pointer from '../pointer';\n\nvar LinearPointer = function (Pointer) {\n  function LinearPointer(scale, options) {\n    Pointer.call(this, scale, options);\n    this.options = deepExtend({\n      track: {\n        visible: defined(options.track)\n      }\n    }, this.options);\n  }\n\n  if (Pointer) LinearPointer.__proto__ = Pointer;\n  LinearPointer.prototype = Object.create(Pointer && Pointer.prototype);\n  LinearPointer.prototype.constructor = LinearPointer;\n\n  LinearPointer.prototype.reflow = function reflow() {\n    var ref = this;\n    var options = ref.options;\n    var scale = ref.scale;\n    var ref$1 = scale.options;\n    var mirror = ref$1.mirror;\n    var vertical = ref$1.vertical;\n    var scaleLine = scale.lineBox();\n    var trackSize = options.track.size || options.size;\n    var pointerHalfSize = options.size / 2;\n    var margin = getSpacing(options.margin);\n    var space = vertical ? margin[mirror ? \"left\" : \"right\"] : margin[mirror ? \"bottom\" : \"top\"];\n    var pointerBox, pointerRangeBox, trackBox;\n    space = mirror ? -space : space;\n\n    if (vertical) {\n      trackBox = new Box(scaleLine.x1 + space, scaleLine.y1, scaleLine.x1 + space, scaleLine.y2);\n\n      if (mirror) {\n        trackBox.x1 -= trackSize;\n      } else {\n        trackBox.x2 += trackSize;\n      }\n\n      if (options.shape !== BAR_POINTER) {\n        pointerRangeBox = new Box(scaleLine.x2 + space, scaleLine.y1 - pointerHalfSize, scaleLine.x2 + space, scaleLine.y2 + pointerHalfSize);\n        pointerBox = pointerRangeBox;\n      }\n    } else {\n      trackBox = new Box(scaleLine.x1, scaleLine.y1 - space, scaleLine.x2, scaleLine.y1 - space);\n\n      if (mirror) {\n        trackBox.y2 += trackSize;\n      } else {\n        trackBox.y1 -= trackSize;\n      }\n\n      if (options.shape !== BAR_POINTER) {\n        pointerRangeBox = new Box(scaleLine.x1 - pointerHalfSize, scaleLine.y1 - space, scaleLine.x2 + pointerHalfSize, scaleLine.y1 - space);\n        pointerBox = pointerRangeBox;\n      }\n    }\n\n    this.trackBox = trackBox;\n    this.pointerRangeBox = pointerRangeBox;\n    this.box = pointerBox || trackBox.clone().pad(options.border.width);\n  };\n\n  LinearPointer.prototype.getElementOptions = function getElementOptions() {\n    var options = this.options;\n    return {\n      fill: {\n        color: options.color,\n        opacity: options.opacity\n      },\n      stroke: defined(options.border) ? {\n        color: options.border.width ? options.border.color || options.color : \"\",\n        width: options.border.width,\n        dashType: options.border.dashType,\n        opacity: options.opacity\n      } : null\n    };\n  };\n\n  LinearPointer.prototype._margin = function _margin() {\n    var ref = this;\n    var scale = ref.scale;\n    var options = ref.options;\n    var ref$1 = scale.options;\n    var mirror = ref$1.mirror;\n    var vertical = ref$1.vertical;\n    var margin = getSpacing(options.margin);\n    var space = vertical ? margin[mirror ? \"left\" : \"right\"] : margin[mirror ? \"bottom\" : \"top\"];\n    return space;\n  };\n\n  return LinearPointer;\n}(Pointer);\n\nsetDefaultOptions(LinearPointer, {\n  shape: BAR_POINTER,\n  track: {\n    border: {\n      width: 1\n    }\n  },\n  color: BLACK,\n  border: {\n    width: 1\n  },\n  opacity: 1,\n  margin: getSpacing(3),\n  animation: {\n    type: BAR_POINTER\n  },\n  visible: true\n});\nexport default LinearPointer;","map":null,"metadata":{},"sourceType":"module"}